import sys

class Model:
    """
        An abstraction of a machine learning model that contains the
        necessary parameters to be run as a standalone script.
    """

    def __init__(self, name, arguments, script_name):
        """
            Creates a new Model object with the necessary
            parameters to be executed.

            Arguments:
            `name` : The name of the model.
            `arguments` : The list of arguments for the script
            `script_name` : The PATH of the script.
        """
        self.name = name
        self.arguments = arguments
        self.script_name = script_name

    def run_model(self, input_file, output_file):
        """
            Runs the model in the input file given as argument.

            Arguments:
            `input_file` : file that contains the dataset.
            `output_file` : file in which the results will be dumped.
        """
        import subprocess
        try:
            cmd = [self.script_name]
            cmd.extend(self.arguments)
            cmd.extend(['--input', input_file, '--output', output_file])
            subprocess.check_call(cmd)
        except:
            sys.stderr('Error 404: There was a problem running \
                                 model {0}'.format(self.name))
